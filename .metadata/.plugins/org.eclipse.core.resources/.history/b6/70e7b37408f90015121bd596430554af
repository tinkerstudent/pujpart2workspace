package com.tinkeracademy.projects;

import java.io.File;
import java.io.IOException;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

public class ChatService implements Runnable {

	private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
	
	private ScheduledFuture<?> futureTask;
	
	private File chatFile;
	
	public void startService() {
		initializeChatFile();
		futureTask = scheduler.scheduleAtFixedRate(this, 1, 1, TimeUnit.SECONDS);
	}
	
	public void stopService() {
		futureTask.cancel(false);
	}
	
	public void run() {
		System.out.println("Scheduled Run!");
	}
	
	public void initializeChatFile() {
		String userHomeDirectory = System.getProperty("user.home");
		try {		
			File file = new File(userHomeDirectory, "TinkerAcademyChat.tff");
			if (!file.exists()) {
				file.createNewFile();
			}
		} catch(IOException e) {
			System.out.println("Oops:"+e);
		}
	}
}
