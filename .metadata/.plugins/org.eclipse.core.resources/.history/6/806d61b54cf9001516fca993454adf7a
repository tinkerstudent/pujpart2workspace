package com.tinkeracademy.projects;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JTextArea;

import com.tinkeracademy.projects.ChatService.InitChatStatus;

public class ChatClient implements ActionListener {

	public static ChatClient chat;
	
	public static ChatService chatService;
	
	public JButton sendButton;
	
	public JTextArea chatHistory;
	
	public JTextArea chatMessage;
	
	public ChatClient() {
		chatService = new ChatService();
	}
	
	public static void main(String[] args) {
		chat = new ChatClient();
		javax.swing.SwingUtilities.invokeLater(new Runnable() {
			public void run() {
				chat.createAndShowGUI();
			}
		});
		chatService.startService();
	}
	
	public void createAndShowGUI() {
		Window.show();
		Window.addLabel("Chat Application Developed By: Tinker Academy v1.0");
		chatHistory = Window.addTextArea("", 16, 10, false);
		chatMessage = Window.addTextArea("", 4, 10, true);
		sendButton = Window.addButton("Send");
		sendButton.addActionListener(this);
		InitChatStatus initStatus = chatService.initializeChatFile();
		if (initStatus == InitChatStatus.INIT_ERROR) {
			chatMessage.setText("Oops! Error! Call Super.., no wait, Call Bat.., no wait, just Call me!");
		} else if (initStatus == InitChatStatus.NOT_INITIALIZED) {
			chatMessage.setText("<Enter Your Name>");
		}
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		InitChatStatus initStatus = chatService.initializeChatFile();
		if (initStatus == InitChatStatus.INIT_ERROR) {
			chatMessage.setText("Oops! Error! Call Super.., no wait, Call Bat.., no wait, just Call me!");
		} else if (initStatus == InitChatStatus.NOT_INITIALIZED) {
			chatMessage.setText("<Enter Your Name>");
		}
	}
}
